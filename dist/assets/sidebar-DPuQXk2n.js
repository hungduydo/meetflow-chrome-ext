var W=Object.defineProperty;var G=(s,t,n)=>t in s?W(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var S=(s,t,n)=>G(s,typeof t!="symbol"?t+"":t,n);import{R as L,j as e,r as N,c as V}from"./globals-7RO5a9WH.js";const q=s=>{let t;const n=new Set,a=(o,j)=>{const c=typeof o=="function"?o(t):o;if(!Object.is(c,t)){const y=t;t=j??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(R=>R(t,y))}},i=()=>t,_={setState:a,getState:i,getInitialState:()=>r,subscribe:o=>(n.add(o),()=>n.delete(o))},r=t=s(a,i,_);return _},K=s=>s?q(s):q,Q=s=>s;function J(s,t=Q){const n=L.useSyncExternalStore(s.subscribe,L.useCallback(()=>t(s.getState()),[s,t]),L.useCallback(()=>t(s.getInitialState()),[s,t]));return L.useDebugValue(n),n}const H=s=>{const t=K(s),n=a=>J(t,a);return Object.assign(n,t),n},Z=s=>s?H(s):H,M=Z(s=>({token:null,setToken:t=>s({token:t}),meetingId:null,meetingTitle:"Meeting",streamStatus:"idle",setMeetingId:t=>s({meetingId:t}),setStreamStatus:t=>s({streamStatus:t}),segments:[],interimText:"",addSegment:t=>s(n=>t.isFinal?n.segments.findIndex(i=>i.id===t.id)!==-1?{interimText:""}:{segments:[...n.segments,t],interimText:""}:{interimText:t.text}),setInterimText:t=>s({interimText:t}),clearTranscript:()=>s({segments:[],interimText:""}),pendingReply:null,triggerText:null,isLoadingReply:!1,setPendingReply:(t,n=void 0)=>s({pendingReply:t,triggerText:n??null,isLoadingReply:!1}),setLoadingReply:t=>s({isLoadingReply:t}),dismissReply:()=>s({pendingReply:null,triggerText:null}),searchQuery:"",searchResult:null,isSearching:!1,setSearchQuery:t=>s({searchQuery:t}),setSearchResult:t=>s({searchResult:t}),setSearching:t=>s({isSearching:t}),minutes:null,isGeneratingMinutes:!1,setMinutes:t=>s({minutes:t,isGeneratingMinutes:!1}),setGeneratingMinutes:t=>s({isGeneratingMinutes:t}),activeTab:"transcript",isSidebarOpen:!0,isMagicSearchOpen:!1,setActiveTab:t=>s({activeTab:t}),setSidebarOpen:t=>s({isSidebarOpen:t}),setMagicSearchOpen:t=>s({isMagicSearchOpen:t})})),P="http://localhost:3001";class X extends Error{constructor(n,a){super(a);S(this,"status");this.status=n,this.name="ApiError"}}async function w(s,t={},n){const a={"Content-Type":"application/json",...t.headers};n&&(a.Authorization=`Bearer ${n}`);const i=await fetch(`${P}${s}`,{...t,headers:a});if(!i.ok){const d=await i.json().catch(()=>({error:i.statusText}));throw new X(i.status,d.error??"Request failed")}if(i.status!==204)return i.json()}const $={create:(s,t)=>w("/api/meetings",{method:"POST",body:JSON.stringify(t)},s),list:s=>w("/api/meetings",{},s),get:(s,t)=>w(`/api/meetings/${t}`,{},s),update:(s,t,n)=>w(`/api/meetings/${t}`,{method:"PATCH",body:JSON.stringify(n)},s),exportUrl:(s,t)=>`${P}/api/meetings/${s}/export?token=${t}`,generateMinutes:(s,t)=>w(`/api/meetings/${t}/minutes`,{method:"POST"},s)},F={smartReply:(s,t,n)=>w(`/api/ai/smart-reply/${t}`,{method:"POST",body:JSON.stringify({triggerText:n})},s),markReplyUsed:(s,t,n)=>w(`/api/ai/smart-reply/${t}/used`,{method:"PATCH",body:JSON.stringify({variant:n})},s),magicSearch:(s,t,n)=>w(`/api/ai/search/${t}`,{method:"POST",body:JSON.stringify({query:n})},s)},A={upload:(s,t)=>{const n=new FormData;return n.append("file",t),w("/api/documents",{method:"POST",body:n,headers:{}},s)},list:s=>w("/api/documents",{},s),delete:(s,t)=>w(`/api/documents/${t}`,{method:"DELETE"},s)},Y="ws://localhost:3001",ee=250;class te{constructor(t,n,a){S(this,"meetingId");S(this,"token");S(this,"onEvent");S(this,"ws",null);S(this,"mediaRecorder",null);S(this,"combinedStream",null);S(this,"reconnectTimer",null);S(this,"reconnectAttempts",0);S(this,"maxReconnects",5);this.meetingId=t,this.token=n,this.onEvent=a}async startCapture(){try{const t=await this.captureTabAudio(),n=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:16e3},video:!1}),a=new AudioContext({sampleRate:16e3}),i=a.createMediaStreamDestination();t&&a.createMediaStreamSource(t).connect(i),a.createMediaStreamSource(n).connect(i),this.combinedStream=i.stream,await this.connectWebSocket(),this.startMediaRecorder()}catch(t){throw this.onEvent({type:"error",message:t.message}),t}}async captureTabAudio(){try{const t=await navigator.mediaDevices.getDisplayMedia({video:!1,audio:{echoCancellation:!1,noiseSuppression:!1}});return t.getVideoTracks().forEach(n=>n.stop()),t}catch{return null}}connectWebSocket(){return new Promise((t,n)=>{const a=`${Y}/ws/stream?meetingId=${this.meetingId}&token=${encodeURIComponent(this.token)}`;this.ws=new WebSocket(a),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.reconnectAttempts=0,this.onEvent({type:"connected"}),t()},this.ws.onerror=i=>{this.onEvent({type:"error",message:"WebSocket error"}),n(i)},this.ws.onclose=()=>{this.onEvent({type:"disconnected"}),this.attemptReconnect()},this.ws.onmessage=i=>{try{const d=JSON.parse(i.data);this.onEvent(d)}catch{}}})}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnects)return;this.reconnectAttempts++;const t=Math.min(1e3*2**this.reconnectAttempts,3e4);this.reconnectTimer=setTimeout(()=>this.connectWebSocket(),t)}startMediaRecorder(){if(!this.combinedStream)return;const t=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";this.mediaRecorder=new MediaRecorder(this.combinedStream,{mimeType:t,audioBitsPerSecond:16e3}),this.mediaRecorder.ondataavailable=n=>{var a;n.data.size>0&&((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN&&n.data.arrayBuffer().then(i=>{var d;return(d=this.ws)==null?void 0:d.send(i)})},this.mediaRecorder.start(ee)}async stop(){var t,n,a;this.reconnectTimer&&clearTimeout(this.reconnectTimer),(t=this.mediaRecorder)==null||t.stop(),(n=this.combinedStream)==null||n.getTracks().forEach(i=>i.stop()),((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN&&(this.ws.send(JSON.stringify({type:"end"})),this.ws.close(1e3,"Stream ended")),this.ws=null,this.mediaRecorder=null,this.combinedStream=null}get isConnected(){var t;return((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN}}const se="_header_usm6u_2",ne="_left_usm6u_14",ae="_right_usm6u_15",ie="_logo_usm6u_18",oe="_logoMark_usm6u_19",ce="_logoText_usm6u_26",re="_statusBadge_usm6u_35",le="_statusLabel_usm6u_61",de="_liveDot_usm6u_63",ue="_recIndicator_usm6u_72",me="_recDot_usm6u_81",pe="_recLabel_usm6u_88",he="_collapseBtn_usm6u_96",v={header:se,left:ne,right:ae,logo:ie,logoMark:oe,logoText:ce,statusBadge:re,statusLabel:le,liveDot:de,recIndicator:ue,recDot:me,recLabel:pe,collapseBtn:he},_e={idle:"Ready",connecting:"Connectingâ€¦",live:"LIVE",error:"Error"};function xe(){const{streamStatus:s,meetingTitle:t,isSidebarOpen:n,setSidebarOpen:a}=M();return e.jsxs("header",{className:v.header,children:[e.jsxs("div",{className:v.left,children:[e.jsxs("div",{className:v.logo,children:[e.jsx("span",{className:v.logoMark,children:"M"}),e.jsx("span",{className:v.logoText,children:"eetFlow"})]}),e.jsxs("div",{className:v.statusBadge,"data-status":s,children:[s==="live"&&e.jsx("span",{className:v.liveDot}),e.jsx("span",{className:v.statusLabel,children:_e[s]})]})]}),e.jsxs("div",{className:v.right,children:[s==="live"&&e.jsxs("div",{className:v.recIndicator,title:"Recording in progress",children:[e.jsx("span",{className:v.recDot}),e.jsx("span",{className:v.recLabel,children:"REC"})]}),e.jsx("button",{className:v.collapseBtn,onClick:()=>a(!n),title:"Collapse sidebar","aria-label":"Collapse sidebar",children:e.jsx(ge,{})})]})]})}function ge(){return e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})}const ye="_panel_1rpbu_2",je="_toolbar_1rpbu_9",be="_count_1rpbu_18",fe="_exportBtn_1rpbu_24",ve="_body_1rpbu_46",Ne="_empty_1rpbu_56",Se="_emptyIcon_1rpbu_65",we="_waiting_1rpbu_68",ke="_waitDot_1rpbu_74",Te="_segment_1rpbu_83",Re="_speakerRow_1rpbu_88",Be="_speakerDot_1rpbu_97",Ie="_speakerName_1rpbu_103",Me="_timestamp_1rpbu_109",Ce="_segText_1rpbu_116",De="_interim_1rpbu_124",h={panel:ye,toolbar:je,count:be,exportBtn:fe,body:ve,empty:Ne,emptyIcon:Se,waiting:we,waitDot:ke,segment:Te,speakerRow:Re,speakerDot:Be,speakerName:Ie,timestamp:Me,segText:Ce,interim:De};function U(s){var t,n,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(n=U(s[t]))&&(a&&(a+=" "),a+=n)}else for(n in s)s[n]&&(a&&(a+=" "),a+=n);return a}function B(){for(var s,t,n=0,a="",i=arguments.length;n<i;n++)(s=arguments[n])&&(t=U(s))&&(a&&(a+=" "),a+=t);return a}const E=["#00E5A0","#8B5CF6","#F59E0B","#38BDF8","#F43F5E","#A78BFA","#34D399","#FB923C"];function Le(s){if(!s)return E[0];const t=parseInt(s.replace(/\D/g,""),10)||0;return E[t%E.length]}function Ae(s){const t=Math.floor(s/1e3),n=Math.floor(t/60),a=t%60;return`${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function Ee(){const{segments:s,interimText:t,streamStatus:n,token:a,meetingId:i}=M(),d=N.useRef(null);N.useEffect(()=>{var r;(r=d.current)==null||r.scrollIntoView({behavior:"smooth"})},[s.length,t]);const f=()=>{if(!a||!i)return;const r=$.exportUrl(i,a);window.open(r,"_blank")},_=s.length===0&&!t;return e.jsxs("div",{className:h.panel,children:[e.jsxs("div",{className:h.toolbar,children:[e.jsx("span",{className:h.count,children:s.length>0&&`${s.length} segments`}),e.jsxs("button",{className:h.exportBtn,onClick:f,disabled:!a||!i||s.length===0,title:"Download transcript as .txt â€” B1.3",children:[e.jsx($e,{}),"Export .txt"]})]}),e.jsxs("div",{className:h.body,children:[_&&n!=="live"&&e.jsxs("div",{className:h.empty,children:[e.jsx("div",{className:h.emptyIcon,children:"âŒ¨"}),e.jsx("p",{children:"Transcript will appear here once the meeting starts."})]}),_&&n==="live"&&e.jsxs("div",{className:h.waiting,children:[e.jsx("span",{className:h.waitDot}),e.jsx("span",{className:h.waitDot,style:{animationDelay:"0.2s"}}),e.jsx("span",{className:h.waitDot,style:{animationDelay:"0.4s"}})]}),s.map((r,o)=>{const j=o===0||s[o-1].speakerId!==r.speakerId,c=Le(r.speakerId);return e.jsxs("div",{className:B(h.segment,"animate-slide-up"),style:{animationDelay:`${Math.min(o*20,200)}ms`},children:[j&&e.jsxs("div",{className:h.speakerRow,children:[e.jsx("span",{className:h.speakerDot,style:{background:c}}),e.jsx("span",{className:h.speakerName,style:{color:c},children:r.speakerLabel??`Speaker ${r.speakerId??"?"}`}),e.jsx("span",{className:h.timestamp,children:Ae(r.startMs)})]}),e.jsx("p",{className:h.segText,children:r.text})]},r.id)}),t&&e.jsx("div",{className:B(h.segment,h.interim),children:e.jsx("p",{className:h.segText,children:t})}),e.jsx("div",{ref:d})]})]})}function $e(){return e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}const Fe="_panel_19uui_2",Oe="_loading_19uui_5",ze="_loadingBar_19uui_6",qe="_loadingFill_19uui_12",He="_loadingText_19uui_21",Pe="_trigger_19uui_24",Ue="_triggerLabel_19uui_31",We="_triggerText_19uui_32",Ge="_replyCard_19uui_35",Ve="_variants_19uui_37",Ke="_variantBtn_19uui_39",Qe="_variantHeader_19uui_58",Je="_variantIcon_19uui_59",Ze="_variantLabel_19uui_60",Xe="_variantDesc_19uui_61",Ye="_copyHint_19uui_62",et="_variantText_19uui_65",tt="_dismissBtn_19uui_72",st="_idle_19uui_87",nt="_idleIcon_19uui_95",at="_idleSub_19uui_97",p={panel:Fe,loading:Oe,loadingBar:ze,loadingFill:qe,loadingText:He,trigger:Pe,triggerLabel:Ue,triggerText:We,replyCard:Ge,variants:Ve,variantBtn:Ke,variantHeader:Qe,variantIcon:Je,variantLabel:Ze,variantDesc:Xe,copyHint:Ye,variantText:et,dismissBtn:tt,idle:st,idleIcon:nt,idleSub:at},it=[{key:"professional",label:"Professional",icon:"ðŸ’¼",desc:"Formal & thorough"},{key:"casual",label:"Casual",icon:"ðŸ’¬",desc:"Friendly & natural"},{key:"concise",label:"Concise",icon:"âš¡",desc:"One sentence"}];function ot(){const{pendingReply:s,triggerText:t,isLoadingReply:n,token:a,meetingId:i,dismissReply:d,setActiveTab:f}=M(),_=!s&&!n,r=async o=>{if(!s||!a)return;const j=s[o];await navigator.clipboard.writeText(j),await F.markReplyUsed(a,s.replyId,o).catch(()=>{}),d()};return e.jsxs("div",{className:p.panel,children:[n&&e.jsxs("div",{className:p.loading,children:[e.jsx("div",{className:p.loadingBar,children:e.jsx("div",{className:p.loadingFill})}),e.jsx("p",{className:p.loadingText,children:"Generating repliesâ€¦"})]}),s&&e.jsxs("div",{className:B(p.replyCard,"animate-slide-up"),children:[t&&e.jsxs("div",{className:p.trigger,children:[e.jsx("span",{className:p.triggerLabel,children:"Addressed:"}),e.jsxs("span",{className:p.triggerText,children:['"',t,'"']})]}),e.jsx("div",{className:p.variants,children:it.map(({key:o,label:j,icon:c,desc:y})=>e.jsxs("button",{className:p.variantBtn,onClick:()=>r(o),title:"Click to copy to clipboard",children:[e.jsxs("div",{className:p.variantHeader,children:[e.jsx("span",{className:p.variantIcon,children:c}),e.jsx("span",{className:p.variantLabel,children:j}),e.jsx("span",{className:p.variantDesc,children:y}),e.jsx("span",{className:p.copyHint,children:"Copy â†—"})]}),e.jsx("p",{className:p.variantText,children:s[o]})]},o))}),e.jsx("button",{className:p.dismissBtn,onClick:d,children:"Dismiss"})]}),_&&e.jsxs("div",{className:p.idle,children:[e.jsx("div",{className:p.idleIcon,children:e.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),e.jsx("p",{children:"Smart Reply activates when someone addresses you directly."}),e.jsx("p",{className:p.idleSub,children:"MeetFlow detects questions directed at you and generates 3 reply options instantly."})]})]})}const ct="_backdrop_nazo0_2",rt="_modal_nazo0_15",lt="_inputRow_nazo0_29",dt="_cmdIcon_nazo0_36",ut="_input_nazo0_29",mt="_searchBtn_nazo0_52",pt="_spinner_nazo0_67",ht="_results_nazo0_78",_t="_error_nazo0_86",xt="_sectionLabel_nazo0_93",gt="_answer_nazo0_104",yt="_answerLabel_nazo0_110",jt="_answerText_nazo0_119",bt="_quotes_nazo0_122",ft="_quote_nazo0_122",vt="_quoteSpeaker_nazo0_129",Nt="_quoteText_nazo0_130",St="_quoteRelevance_nazo0_131",wt="_docResults_nazo0_134",kt="_docResult_nazo0_134",Tt="_similarity_nazo0_141",Rt="_docContent_nazo0_142",Bt="_hint_nazo0_145",m={backdrop:ct,modal:rt,inputRow:lt,cmdIcon:dt,input:ut,searchBtn:mt,spinner:pt,results:ht,error:_t,sectionLabel:xt,answer:gt,answerLabel:yt,answerText:jt,quotes:bt,quote:ft,quoteSpeaker:vt,quoteText:Nt,quoteRelevance:St,docResults:wt,docResult:kt,similarity:Tt,docContent:Rt,hint:Bt};function It(){const{isMagicSearchOpen:s,setMagicSearchOpen:t,searchQuery:n,setSearchQuery:a,searchResult:i,setSearchResult:d,isSearching:f,setSearching:_,token:r,meetingId:o}=M(),j=N.useRef(null),[c,y]=N.useState(null);N.useEffect(()=>{s?setTimeout(()=>{var u;return(u=j.current)==null?void 0:u.focus()},50):(a(""),d(null),y(null))},[s]),N.useEffect(()=>{const u=I=>{I.key==="Escape"&&s&&t(!1)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[s]);const R=async()=>{if(!(!n.trim()||!r||!o)){_(!0),y(null);try{const u=await F.magicSearch(r,o,n);d(u)}catch(u){y(u.message)}finally{_(!1)}}};return s?e.jsx("div",{className:m.backdrop,onClick:()=>t(!1),children:e.jsxs("div",{className:m.modal,onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:m.inputRow,children:[e.jsx("span",{className:m.cmdIcon,children:"âŒ˜"}),e.jsx("input",{ref:j,className:m.input,value:n,onChange:u=>a(u.target.value),onKeyDown:u=>u.key==="Enter"&&R(),placeholder:"Ask anything about this meetingâ€¦",spellCheck:!1}),f?e.jsx("span",{className:m.spinner}):e.jsx("button",{className:m.searchBtn,onClick:R,disabled:!n.trim(),children:"Search"})]}),c&&e.jsx("div",{className:m.error,children:c}),i&&!f&&e.jsxs("div",{className:B(m.results,"animate-slide-up"),children:[e.jsxs("div",{className:m.answer,children:[e.jsx("span",{className:m.answerLabel,children:"Answer"}),e.jsx("p",{className:m.answerText,children:i.transcript.answer})]}),i.transcript.relevantQuotes.length>0&&e.jsxs("div",{className:m.quotes,children:[e.jsx("span",{className:m.sectionLabel,children:"From transcript"}),i.transcript.relevantQuotes.map((u,I)=>e.jsxs("div",{className:m.quote,children:[e.jsx("span",{className:m.quoteSpeaker,children:u.speaker}),e.jsxs("p",{className:m.quoteText,children:['"',u.text,'"']}),e.jsx("p",{className:m.quoteRelevance,children:u.relevance})]},I))]}),i.documents.length>0&&e.jsxs("div",{className:m.docResults,children:[e.jsx("span",{className:m.sectionLabel,children:"From your documents"}),i.documents.map((u,I)=>e.jsxs("div",{className:m.docResult,children:[e.jsxs("span",{className:m.similarity,children:[Math.round(u.similarity*100),"% match"]}),e.jsx("p",{className:m.docContent,children:u.content})]},I))]})]}),e.jsxs("div",{className:m.hint,children:[e.jsx("kbd",{children:"â†µ"})," search Â Â·Â  ",e.jsx("kbd",{children:"Esc"})," close"]})]})}):null}const Mt="_panel_ew0o7_2",Ct="_dropZone_ew0o7_4",Dt="_uploading_ew0o7_19",Lt="_uploadSpinner_ew0o7_21",At="_dropText_ew0o7_30",Et="_dropSub_ew0o7_31",$t="_error_ew0o7_33",Ft="_list_ew0o7_35",Ot="_empty_ew0o7_37",zt="_emptySub_ew0o7_39",qt="_docRow_ew0o7_41",Ht="_docIcon_ew0o7_53",Pt="_docInfo_ew0o7_54",Ut="_docName_ew0o7_55",Wt="_docMeta_ew0o7_56",Gt="_statusBadge_ew0o7_58",Vt="_deleteBtn_ew0o7_72",g={panel:Mt,dropZone:Ct,uploading:Dt,uploadSpinner:Lt,dropText:At,dropSub:Et,error:$t,list:Ft,empty:Ot,emptySub:zt,docRow:qt,docIcon:Ht,docInfo:Pt,docName:Ut,docMeta:Wt,statusBadge:Gt,deleteBtn:Vt},Kt={pending:"Queued",processing:"Embeddingâ€¦",ready:"Ready",failed:"Failed"};function Qt(s){return s<1024?`${s}B`:s<1024*1024?`${(s/1024).toFixed(1)}KB`:`${(s/(1024*1024)).toFixed(1)}MB`}function Jt(){const{token:s}=M(),[t,n]=N.useState([]),[a,i]=N.useState(!1),[d,f]=N.useState(null),_=N.useRef(null);N.useEffect(()=>{s&&r()},[s]);async function r(){if(!s)return;const c=await A.list(s).catch(()=>[]);n(c)}async function o(c){if(!(!(c!=null&&c.length)||!s)){i(!0),f(null);try{for(const y of Array.from(c))await A.upload(s,y);await r()}catch(y){f(y.message)}finally{i(!1)}}}async function j(c){s&&(await A.delete(s,c).catch(()=>{}),n(y=>y.filter(R=>R.id!==c)))}return e.jsxs("div",{className:g.panel,children:[e.jsxs("div",{className:B(g.dropZone,a&&g.uploading),onDragOver:c=>c.preventDefault(),onDrop:c=>{c.preventDefault(),o(c.dataTransfer.files)},onClick:()=>{var c;return(c=_.current)==null?void 0:c.click()},children:[e.jsx("input",{ref:_,type:"file",multiple:!0,accept:".pdf,.txt,.docx",style:{display:"none"},onChange:c=>o(c.target.files)}),a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:g.uploadSpinner}),e.jsx("span",{className:g.dropText,children:"Uploading & embeddingâ€¦"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zt,{}),e.jsx("span",{className:g.dropText,children:"Drop files or click to upload"}),e.jsx("span",{className:g.dropSub,children:"PDF, TXT, DOCX Â· Max 10MB"})]})]}),d&&e.jsx("div",{className:g.error,children:d}),e.jsxs("div",{className:g.list,children:[t.length===0&&!a&&e.jsxs("div",{className:g.empty,children:[e.jsx("p",{children:"No documents uploaded yet."}),e.jsx("p",{className:g.emptySub,children:"Upload PDFs or docs to let MeetFlow reference them during meetings."})]}),t.map(c=>e.jsxs("div",{className:B(g.docRow,"animate-slide-up"),children:[e.jsx("div",{className:g.docIcon,children:e.jsx(Xt,{})}),e.jsxs("div",{className:g.docInfo,children:[e.jsx("span",{className:g.docName,children:c.filename}),e.jsxs("span",{className:g.docMeta,children:[Qt(c.fileSize),c.chunkCount>0&&` Â· ${c.chunkCount} chunks`]})]}),e.jsx("span",{className:g.statusBadge,"data-status":c.status,children:Kt[c.status]}),e.jsx("button",{className:g.deleteBtn,onClick:()=>j(c.id),title:"Delete","aria-label":"Delete document",children:e.jsx(Yt,{})})]},c.id))]})]})}function Zt(){return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}function Xt(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),e.jsx("polyline",{points:"13 2 13 9 20 9"})]})}function Yt(){return e.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),e.jsx("path",{d:"M10 11v6M14 11v6"}),e.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})}const es="_panel_htrm4_2",ts="_empty_htrm4_5",ss="_emptyIcon_htrm4_6",ns="_emptySub_htrm4_8",as="_generateBtn_htrm4_9",is="_loading_htrm4_28",os="_loadingRing_htrm4_29",cs="_loadingSub_htrm4_38",rs="_minutes_htrm4_41",ls="_minutesHeader_htrm4_42",ds="_minutesTitle_htrm4_49",us="_minutesActions_htrm4_50",ms="_actionBtn_htrm4_51",ps="_section_htrm4_65",hs="_sectionTitle_htrm4_66",_s="_titleDot_htrm4_74",xs="_sectionBody_htrm4_75",gs="_actionList_htrm4_78",ys="_actionItem_htrm4_79",js="_checkbox_htrm4_80",bs="_actionBody_htrm4_85",fs="_actionTask_htrm4_86",vs="_actionMeta_htrm4_87",Ns="_assignee_htrm4_88",Ss="_dueDate_htrm4_89",ws="_decisionList_htrm4_92",ks="_decisionItem_htrm4_93",Ts="_decisionText_htrm4_94",Rs="_decisionCtx_htrm4_95",Bs="_topics_htrm4_98",Is="_topic_htrm4_98",l={panel:es,empty:ts,emptyIcon:ss,emptySub:ns,generateBtn:as,loading:is,loadingRing:os,loadingSub:cs,minutes:rs,minutesHeader:ls,minutesTitle:ds,minutesActions:us,actionBtn:ms,section:ps,sectionTitle:hs,titleDot:_s,sectionBody:xs,actionList:gs,actionItem:ys,checkbox:js,actionBody:bs,actionTask:fs,actionMeta:vs,assignee:Ns,dueDate:Ss,decisionList:ws,decisionItem:ks,decisionText:Ts,decisionCtx:Rs,topics:Bs,topic:Is};function Ms(){const{token:s,meetingId:t,minutes:n,isGeneratingMinutes:a,setMinutes:i,setGeneratingMinutes:d}=M(),f=async()=>{if(!(!s||!t)){d(!0);try{const r=await $.generateMinutes(s,t);i(r)}catch(r){d(!1),console.error(r)}}},_=()=>{if(!n)return;const r=[`## Summary
${n.summary}`,`
## Action Items
${n.actionItems.map(o=>`- [ ] ${o.task}${o.assignee?` (@${o.assignee})`:""}${o.dueDate?` Â· Due: ${o.dueDate}`:""}`).join(`
`)}`,`
## Decisions
${n.decisions.map(o=>`- ${o.decision}
  Context: ${o.context}`).join(`
`)}`,`
## Key Topics
${n.keyTopics.map(o=>`- ${o}`).join(`
`)}`].join(`
`);navigator.clipboard.writeText(r)};return e.jsxs("div",{className:l.panel,children:[!n&&!a&&e.jsxs("div",{className:l.empty,children:[e.jsx("div",{className:l.emptyIcon,children:e.jsx(Cs,{})}),e.jsx("p",{children:"Generate AI meeting minutes from the full transcript."}),e.jsx("p",{className:l.emptySub,children:"Includes summary, action items, decisions, and key topics."}),e.jsxs("button",{className:l.generateBtn,onClick:f,disabled:!s||!t,children:[e.jsx(Ds,{}),"Generate Minutes"]})]}),a&&e.jsxs("div",{className:l.loading,children:[e.jsx("div",{className:l.loadingRing}),e.jsx("p",{children:"Analysing transcriptâ€¦"}),e.jsx("p",{className:l.loadingSub,children:"This takes a few seconds"})]}),n&&e.jsxs("div",{className:B(l.minutes,"animate-fade-in"),children:[e.jsxs("div",{className:l.minutesHeader,children:[e.jsx("span",{className:l.minutesTitle,children:"Meeting Minutes"}),e.jsxs("div",{className:l.minutesActions,children:[e.jsxs("button",{className:l.actionBtn,onClick:_,title:"Copy as Markdown",children:[e.jsx(Ls,{})," Copy"]}),e.jsxs("button",{className:l.actionBtn,onClick:f,title:"Regenerate",children:[e.jsx(As,{})," Regen"]})]})]}),e.jsxs("section",{className:l.section,children:[e.jsx("h3",{className:l.sectionTitle,children:"Summary"}),e.jsx("p",{className:l.sectionBody,children:n.summary})]}),n.actionItems.length>0&&e.jsxs("section",{className:l.section,children:[e.jsxs("h3",{className:l.sectionTitle,children:[e.jsx("span",{className:l.titleDot,style:{background:"var(--accent)"}}),"Action Items"]}),e.jsx("ul",{className:l.actionList,children:n.actionItems.map((r,o)=>e.jsxs("li",{className:l.actionItem,children:[e.jsx("span",{className:l.checkbox}),e.jsxs("div",{className:l.actionBody,children:[e.jsx("span",{className:l.actionTask,children:r.task}),e.jsxs("div",{className:l.actionMeta,children:[r.assignee&&e.jsxs("span",{className:l.assignee,children:["@",r.assignee]}),r.dueDate&&e.jsx("span",{className:l.dueDate,children:r.dueDate})]})]})]},o))})]}),n.decisions.length>0&&e.jsxs("section",{className:l.section,children:[e.jsxs("h3",{className:l.sectionTitle,children:[e.jsx("span",{className:l.titleDot,style:{background:"var(--purple)"}}),"Decisions"]}),e.jsx("ul",{className:l.decisionList,children:n.decisions.map((r,o)=>e.jsxs("li",{className:l.decisionItem,children:[e.jsx("p",{className:l.decisionText,children:r.decision}),e.jsx("p",{className:l.decisionCtx,children:r.context})]},o))})]}),n.keyTopics.length>0&&e.jsxs("section",{className:l.section,children:[e.jsxs("h3",{className:l.sectionTitle,children:[e.jsx("span",{className:l.titleDot,style:{background:"var(--amber)"}}),"Key Topics"]}),e.jsx("div",{className:l.topics,children:n.keyTopics.map((r,o)=>e.jsx("span",{className:l.topic,children:r},o))})]})]})]})}function Cs(){return e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]})}function Ds(){return e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 2L9.5 9.5 2 12l7.5 2.5L12 22l2.5-7.5L22 12l-7.5-2.5z"})})}function Ls(){return e.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}function As(){return e.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]})}const Es="_sidebar_1a7ue_2",$s="_tabs_1a7ue_12",Fs="_tab_1a7ue_12",Os="_tabActive_1a7ue_43",zs="_tabLabel_1a7ue_49",qs="_tabShort_1a7ue_50",Hs="_panelArea_1a7ue_53",Ps="_footer_1a7ue_61",Us="_startBtn_1a7ue_71",Ws="_stopBtn_1a7ue_71",Gs="_startDot_1a7ue_98",Vs="_connectSpinner_1a7ue_105",Ks="_stopSquare_1a7ue_121",Qs="_searchFab_1a7ue_128",b={sidebar:Es,tabs:$s,tab:Fs,tabActive:Os,tabLabel:zs,tabShort:qs,panelArea:Hs,footer:Ps,startBtn:Us,stopBtn:Ws,startDot:Gs,connectSpinner:Vs,stopSquare:Ks,searchFab:Qs};let D=null;const Js=[{id:"transcript",label:"Transcript",shortLabel:"TX"},{id:"replies",label:"Replies",shortLabel:"AI"},{id:"search",label:"Search",shortLabel:"âŒ˜K"},{id:"docs",label:"Docs",shortLabel:"ðŸ“Ž"},{id:"minutes",label:"Minutes",shortLabel:"ðŸ“"}];function Zs(){const{activeTab:s,setActiveTab:t,streamStatus:n,setStreamStatus:a,token:i,setToken:d,meetingId:f,setMeetingId:_,addSegment:r,setLoadingReply:o,setPendingReply:j,isMagicSearchOpen:c,setMagicSearchOpen:y}=M();N.useEffect(()=>{chrome.runtime.sendMessage({type:"GET_AUTH_TOKEN"},x=>{x&&d(x)}),window.addEventListener("message",x=>{var T;((T=x.data)==null?void 0:T.type)==="OPEN_MAGIC_SEARCH"&&(y(!0),t("search"))})},[]);const R=async()=>{if(i){a("connecting");try{const x=window.location.href,T=await $.create(i,{title:document.title.replace("- Google Meet","").trim()||"Google Meet",googleMeetUrl:x});_(T.id),D=new te(T.id,i,k=>{if(k.type==="connected")a("live");else if(k.type==="disconnected")a("idle");else if(k.type==="error")a("error");else if(k.type==="transcript"&&(r(k.data),k.data.isFinal)){const C=k.data.text.toLowerCase();C.includes("?")&&(C.includes("you think")||C.includes("your view")||C.includes("do you")||C.includes("what about you")||C.includes("can you"))&&u(T.id,k.data.text)}}),await D.startCapture()}catch(x){a("error"),console.error("[MeetFlow] Start failed:",x)}}},u=async(x,T)=>{if(i){o(!0),t("replies");try{const k=await F.smartReply(i,x,T);j(k,T)}catch{o(!1)}}},I=async()=>{await(D==null?void 0:D.stop()),D=null,a("idle"),_(null)},O=n==="live",z=n==="connecting";return e.jsxs("div",{className:b.sidebar,children:[e.jsx(xe,{}),e.jsx("div",{className:b.tabs,role:"tablist",children:Js.map(x=>e.jsxs("button",{role:"tab","aria-selected":s===x.id,className:B(b.tab,s===x.id&&b.tabActive),onClick:()=>{t(x.id),x.id==="search"&&y(!0)},children:[e.jsx("span",{className:b.tabLabel,children:x.label}),e.jsx("span",{className:b.tabShort,children:x.shortLabel})]},x.id))}),e.jsxs("div",{className:b.panelArea,children:[s==="transcript"&&e.jsx(Ee,{}),s==="replies"&&e.jsx(ot,{}),s==="docs"&&e.jsx(Jt,{}),s==="minutes"&&e.jsx(Ms,{})]}),e.jsxs("div",{className:b.footer,children:[!O&&!z&&e.jsxs("button",{className:b.startBtn,onClick:R,disabled:!i,children:[e.jsx("span",{className:b.startDot}),"Start Recording"]}),z&&e.jsxs("button",{className:b.startBtn,disabled:!0,children:[e.jsx("span",{className:b.connectSpinner}),"Connectingâ€¦"]}),O&&e.jsxs("button",{className:b.stopBtn,onClick:I,children:[e.jsx("span",{className:b.stopSquare}),"Stop Recording"]}),e.jsxs("button",{className:b.searchFab,onClick:()=>y(!0),title:"Magic Search (âŒ˜K)",disabled:!f,children:[e.jsx(Xs,{}),e.jsx("kbd",{children:"âŒ˜K"})]})]}),e.jsx(It,{})]})}function Xs(){return e.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}const Ys=document.getElementById("root");V(Ys).render(e.jsx(N.StrictMode,{children:e.jsx(Zs,{})}));
